<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chỉnh sửa đề tài khoa học</title>
    <!-- Liên kết CSS -->
    <link rel="stylesheet" th:href="@{/css/editDeTai.css}">
</head>
<body>
	 <aside th:replace ="layout/sidebar :: sidebar" ></aside>

    <main class="main">
        <div class="container">
            <h2>CHỈNH SỬA ĐỀ TÀI KHOA HỌC</h2>
            <form class="input-form" th:action="@{/detai/edit/{id}(id=${deTaiKH.id})}" th:object="${deTaiKH}" method="post">
                <div class="form-row">
                    <label for="id">Mã đề tài:</label>
                    <input type="text" id="id" th:field="*{id}" readonly placeholder="Mã đề tài" required>
                </div>
                <div class="form-row">
                    <label for="tenDeTai">Tên đề tài:</label>
                    <textarea id="tenDeTai" th:field="*{tenDeTai}" placeholder="Nhập tên đề tài" required></textarea>
                </div>
                <div class="form-row">
                    <label for="capDeTai">Cấp đề tài:</label>
                    <select id="capDeTai" th:field="*{capDeTai}" aria-label="Chọn cấp đề tài" required>
                        <option value="">-- Chọn cấp đề tài --</option>
                        <option value="Đề tài cấp Khoa Công Nghệ Thông Tin">Đề tài cấp Khoa Công Nghệ Thông Tin</option>
                        <option value="Đề tài cấp Đại học Nha Trang">Đề tài cấp Đại học Nha Trang</option>
                        <option value="Đề tài cấp Tỉnh">Đề tài cấp Tỉnh</option>
                        <option value="Đề tài cấp Bộ">Đề tài cấp Bộ</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="donViChuTri">Đơn vị chủ trì:</label>
                    <select id="donViChuTri" th:field="*{donViChuTri}" aria-label="Chọn đơn vị chủ trì" required>
                        <option value="">-- Chọn đơn vị chủ trì --</option>
                        <option value="Khoa Công Nghệ Thông Tin">Khoa Công nghệ Thông Tin</option>
                        <option value="Trường Đại học Nha Trang">Trường Đại học Nha Trang</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="mucTieu">Mục tiêu:</label>
                    <textarea id="mucTieu" th:field="*{mucTieu}" placeholder="Nhập mục tiêu" required></textarea>
                </div>
                <div class="form-row">
                    <label for="noiDung">Nội dung:</label>
                    <textarea id="noiDung" th:field="*{noiDung}" placeholder="Nhập nội dung" required></textarea>
                </div>
                <div class="form-row">
                    <label for="ketQua">Kết quả:</label>
                    <textarea id="ketQua" th:field="*{ketQua}" placeholder="Nhập kết quả" required></textarea>
                </div>
                <div class="form-row">
                    <label for="namBatDau">Năm bắt đầu:</label>
                    <input type="date" id="namBatDau" th:field="*{namBatDau}" placeholder="Chọn ngày bắt đầu" required>
                </div>
                <div class="form-row">
                    <label for="namKetThuc">Năm kết thúc:</label>
                    <input type="date" id="namKetThuc" th:field="*{namKetThuc}" placeholder="Chọn ngày kết thúc" required>
                </div>
                <div class="form-row">
                    <label for="tinhTrang">Tình trạng:</label>
                    <select id="tinhTrang" th:field="*{tinhTrang}" aria-label="Chọn tình trạng" required>
                        <option value="">-- Chọn tình trạng --</option>
                        <option value="Đã hoàn thành">Đã hoàn thành</option>
                        <option value="Đang thực hiện">Đang thực hiện</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="xepLoai">Xếp loại:</label>
                    <select id="xepLoai" th:field="*{xepLoai}" aria-label="Chọn xếp loại" required>
                        <option value="">-- Chọn xếp loại --</option>
                        <option value="Chưa xếp loại">Chưa xếp loại</option>
                        <option value="Tốt">Tốt</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Nhà khoa học tham gia:</label>
                    <div class="nkh-checkbox-container">
                        <table class="nkh-table">
                            <tbody>
                                <tr th:each="nkh : ${nkhList}">
                                    <td class="checkbox-cell">
                                        <input type="checkbox" 
                                               th:id="'nkh_' + ${nkh.nkhId}" 
                                               th:value="${nkh.nkhId}" 
                                               name="nkhIds" 
                                               class="nkh-checkbox"
                                               th:checked="${deTaiKH.nghienCuu.contains(nkh)}" />
                                    </td>
                                    <td class="name-cell">
                                        <label th:for="'nkh_' + ${nkh.nkhId}" th:text="${nkh.hoTen}" class="nkh-name"></label>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="button-group">
                    <button type="submit" class="save-btn">Lưu</button>
                    <a th:href="@{/detai}" class="cancel-btn">Hủy</a>
                </div>
            </form>
        </div>
    </main>
</body>
</html>